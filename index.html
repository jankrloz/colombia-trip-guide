<!DOCTYPE html>
<html lang="es">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>Gu√≠a Interactiva de Viaje: Colombia 2025</title>
		<script src="https://cdn.tailwindcss.com"></script>
		<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
		<script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels@2.2.0"></script>
		<link
			href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap"
			rel="stylesheet"
		/>
		<style>
			html {
				scroll-behavior: smooth;
			}
			body {
				font-family: "Inter", sans-serif;
				background-color: #f8fafc;
			}
			.chart-container {
				position: relative;
				width: 100%;
				max-width: 500px;
				margin-left: auto;
				margin-right: auto;
				height: 300px;
				max-height: 350px;
			}
			@media (min-width: 768px) {
				.chart-container {
					height: 350px;
				}
			}
			.tab-content {
				display: none;
			}
			.tab-content.active {
				display: block;
			}
			.tab.active {
				background-color: #0d9488;
				color: white;
				box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1),
					0 2px 4px -2px rgb(0 0 0 / 0.1);
			}
			#tabs-navigation {
				top: 0; /* Tabs become sticky at the top */
			}
			/* Style for scrollbar */
			.tabs-container::-webkit-scrollbar {
				height: 4px;
			}
			.tabs-container::-webkit-scrollbar-thumb {
				background: #cbd5e1;
				border-radius: 10px;
			}
			.tabs-container::-webkit-scrollbar-track {
				background: #f1f5f9;
			}
		</style>
	</head>
	<body class="text-slate-800">
		<header class="bg-white shadow-sm py-4">
			<div class="container mx-auto px-4 sm:px-6 lg:px-8 flex items-center">
				<div>
					<h1 class="text-2xl sm:text-3xl font-bold text-teal-700">
						Gu√≠a Interactiva de Viaje: Colombia 2025 üá®üá¥
					</h1>
					<p class="text-slate-500 mt-1 text-sm sm:text-base">
						Dossier T√°ctico del 10 al 22 de Octubre.
					</p>
				</div>
			</div>
		</header>

		<main class="container mx-auto px-4 sm:px-6 lg:px-8 py-8">
			<section id="summary" class="mb-8">
				<h2 class="text-3xl font-bold mb-6 text-slate-700 border-b pb-2">
					üìä Resumen Estrat√©gico del Viaje
				</h2>
				<div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
					<div class="bg-white p-6 rounded-lg shadow-md text-center">
						<h3 class="text-lg font-semibold text-slate-600">
							Costo Total Estimado (p.p)
						</h3>
						<p
							class="text-3xl font-bold text-teal-600 mt-2"
							id="summary-total-mxn"
						></p>
						<p class="text-xl text-slate-500" id="summary-total-cop"></p>
					</div>
					<div class="bg-white p-6 rounded-lg shadow-md text-center">
						<h3 class="text-lg font-semibold text-slate-600">
							Duraci√≥n de la Misi√≥n
						</h3>
						<p class="text-3xl font-bold text-teal-600 mt-2">
							13 <span class="text-xl text-slate-500">D√≠as</span>
						</p>
						<p class="text-xl text-slate-500">12 Noches</p>
					</div>
					<div class="bg-white p-6 rounded-lg shadow-md text-center">
						<h3 class="text-lg font-semibold text-slate-600">
							Teatros de Operaciones
						</h3>
						<p class="text-3xl font-bold text-teal-600 mt-2">4</p>
						<p class="text-xl text-slate-500">
							Cartagena, Medell√≠n, Eje Cafetero, Bogot√°
						</p>
					</div>
				</div>
				<div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
					<div
						id="general-budget-table-container"
						class="bg-white p-6 rounded-lg shadow-md"
					>
						<h3 class="text-xl font-semibold mb-4 text-center text-slate-700">
							Distribuci√≥n de Recursos (Estimado por Persona)
						</h3>
						<!-- La tabla del presupuesto general se insertar√° aqu√≠ -->
					</div>
					<div class="bg-white p-6 rounded-lg shadow-md">
						<h3 class="text-xl font-semibold mb-4 text-center text-slate-700">
							Huella Financiera por Destino (Total Gastado en COP)
						</h3>
						<div class="chart-container">
							<canvas id="destinationCostChart"></canvas>
						</div>
					</div>
				</div>
			</section>

			<section id="general-recommendations" class="mb-8">
				<h2 class="text-3xl font-bold mb-6 text-slate-700 border-b pb-2">
					üìù Briefing T√°ctico General
				</h2>
				<div class="bg-white p-6 sm:p-8 rounded-lg shadow-md space-y-6">
					<div>
						<h3 class="text-xl font-bold text-teal-700 mb-2">
							1. ‚úàÔ∏è Procedimientos de Entrada (Aduanas y Migraci√≥n)
						</h3>
						<p class="text-slate-600">
							El requisito m√°s cr√≠tico es completar el formulario
							<strong>Check-Mig</strong>. Debe llenarse en l√≠nea entre
							<strong>72 y 1 hora ANTES</strong> del vuelo. Es obligatorio tanto
							para entrar como para salir de Colombia. Tengan el c√≥digo QR
							generado a la mano en sus celulares.
						</p>
					</div>
					<div>
						<h3 class="text-xl font-bold text-teal-700 mb-2">
							2. üíµ Manejo de Divisas y Pagos
						</h3>
						<p class="text-slate-600">
							<strong>Efectivo (COP):</strong> Es indispensable. Se recomienda
							llevar un aproximado de
							<strong>$150.000 COP por persona</strong> para gastos diarios
							menores. Muchos tours (impuestos portuarios), transportes locales
							(buses, jeeps) y peque√±os comercios solo aceptan efectivo. La tasa
							de cambio en el aeropuerto es de ~0.006 COP por MXN, mientras que
							con tarjetas (ej. Mastercard) es m√°s favorable, ~0.005 COP por
							MXN.
							<br />
							<strong>Denominaciones de Billetes:</strong> Para facilitar las
							transacciones y evitar problemas con el cambio, procuren tener
							siempre billetes de
							<strong>$10.000, $20.000 y $50.000 COP</strong>. Eviten usar
							billetes de $100.000 COP para compras peque√±as.
							<br />
							<strong>Tarjetas de Cr√©dito/D√©bito:</strong> Ampliamente aceptadas
							en hoteles, restaurantes formales y grandes cadenas. Notifiquen a
							sus bancos sobre las fechas del viaje para evitar bloqueos.
						</p>
					</div>
					<div>
						<h3 class="text-xl font-bold text-teal-700 mb-2">
							3. üõ°Ô∏è Seguridad y Conciencia Situacional
						</h3>
						<p class="text-slate-600">
							Colombia es un pa√≠s acogedor, pero como en cualquier destino, es
							clave mantener la prudencia. Eviten exhibir objetos de valor como
							joyas o c√°maras costosas en zonas concurridas. No dejen sus
							pertenencias desatendidas. En las ciudades, despu√©s del anochecer,
							es preferible moverse en
							<strong>apps de transporte (Uber, Cabify, etc.)</strong> en lugar
							de caminar por zonas poco iluminadas.
						</p>
					</div>
					<div>
						<h3 class="text-xl font-bold text-teal-700 mb-2">
							4. üì± Comunicaciones y Tecnolog√≠a
						</h3>
						<p class="text-slate-600">
							Verifiquen los planes de roaming internacional con sus operadores
							en M√©xico, como <strong>Telcel o AT&T</strong>. Alternativamente,
							para tener datos desde el momento del aterrizaje, pueden adquirir
							una <strong>eSIM internacional</strong> de servicios como
							<strong>Airalo</strong> antes de viajar. Descarguen los mapas de
							las ciudades en Google Maps para poder usarlos sin conexi√≥n.
						</p>
					</div>
				</div>
			</section>

			<section id="lodging-summary" class="mb-8">
				<h2 class="text-3xl font-bold mb-6 text-slate-700 border-b pb-2">
					üè® Resumen de Hospedajes
				</h2>
				<div class="bg-white p-6 sm:p-8 rounded-lg shadow-md overflow-x-auto">
					<table class="w-full text-left">
						<thead>
							<tr class="border-b-2 border-slate-300">
								<th class="py-2 pr-3 font-semibold text-sm">Ciudad</th>
								<th class="py-2 pr-3 font-semibold text-sm">Alojamiento</th>
								<th class="py-2 pr-3 font-semibold text-sm">Fechas</th>
								<th class="py-2 pr-3 font-semibold text-sm text-center">
									Noches
								</th>
							</tr>
						</thead>
						<tbody>
							<!-- Lodging data will be inserted here -->
						</tbody>
					</table>
				</div>
			</section>

			<section id="map-links" class="mb-8">
				<h2 class="text-3xl font-bold mb-6 text-slate-700 border-b pb-2">
					üó∫Ô∏è Mapas Compartidos
				</h2>
				<div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6">
					<a
						href="https://maps.app.goo.gl/sFSmPyzs55npkfx17"
						target="_blank"
						rel="noopener noreferrer"
						class="block bg-teal-600 text-white p-6 rounded-lg shadow-lg hover:bg-teal-700 transition text-center"
					>
						<h3 class="text-2xl font-bold">Cartagena</h3>
						<p class="mt-2 font-medium">Ver lista de lugares en Google Maps</p>
					</a>
					<a
						href="https://maps.app.goo.gl/XL7HyXrgzsBm55kGA"
						target="_blank"
						rel="noopener noreferrer"
						class="block bg-teal-600 text-white p-6 rounded-lg shadow-lg hover:bg-teal-700 transition text-center"
					>
						<h3 class="text-2xl font-bold">Medell√≠n</h3>
						<p class="mt-2 font-medium">Ver lista de lugares en Google Maps</p>
					</a>
					<a
						href="https://maps.app.goo.gl/dhChw3SVxqhaVCqa8"
						target="_blank"
						rel="noopener noreferrer"
						class="block bg-teal-600 text-white p-6 rounded-lg shadow-lg hover:bg-teal-700 transition text-center"
					>
						<h3 class="text-2xl font-bold">Eje Cafetero</h3>
						<p class="mt-2 font-medium">Ver lista de lugares en Google Maps</p>
					</a>
					<a
						href="https://maps.app.goo.gl/UwqWoeggSLbJKq377"
						target="_blank"
						rel="noopener noreferrer"
						class="block bg-teal-600 text-white p-6 rounded-lg shadow-lg hover:bg-teal-700 transition text-center"
					>
						<h3 class="text-2xl font-bold">Bogot√°</h3>
						<p class="mt-2 font-medium">Ver lista de lugares en Google Maps</p>
					</a>
				</div>
			</section>

			<nav
				id="tabs-navigation"
				class="p-2 rounded-lg mb-8 sticky z-10 bg-slate-100/80 backdrop-blur-sm"
			>
				<div class="tabs-container overflow-x-auto whitespace-nowrap pb-2">
					<!-- Day tabs will be inserted here -->
				</div>
			</nav>

			<div id="content-container">
				<!-- Daily content will be inserted here -->
			</div>
		</main>

		<script>
			// =================================================================================
			// CONFIGURATION AND DATA
			// Centralized configuration and single source of truth for the trip.
			// =================================================================================
			const CONFIG = {
				COP_TO_MXN_RATE: 0.006,
				CONTINGENCY_RATE: 0.15,
				CHART_COLORS: [
					"#14b8a6", // teal-500
					"#f59e0b", // amber-500
					"#3b82f6", // blue-500
					"#8b5cf6", // violet-500
					"#ec4899", // pink-500
					"#65a30d", // lime-600
				],
			};

			// Single Source of Truth for all trip data.
			// Redundant/derived values like totals have been removed and are now calculated.
			const tripData = {
				prepaidCosts: {
					vuelosInternacionalesMXN: 7074,
					vuelosInternosMXN: 8708.33,
					hospedajesMXN: {
						// Costs per person
						cartagena: 1815.5,
						medellin: 303.71,
						salento: 2520.0,
						bogota: 2189.67,
					},
				},
				lodgingSummary: [
					{
						city: "Cartagena",
						name: "Airbnb's Bolivar",
						checkIn: "10 Oct",
						checkOut: "13 Oct",
						nights: 3,
						mapLink:
							"https://www.google.com/maps/search/?api=1&query=Apartamento+Bijou+Centro+Historico+Cartagena",
					},
					{
						city: "Medell√≠n",
						name: "Airbnb's Laureles",
						checkIn: "13 Oct",
						checkOut: "15 Oct",
						nights: 2,
						mapLink:
							"https://www.google.com/maps/search/?api=1&query=Casa+Santaf√©+Carrera+72+%23C2-30+Medell√≠n",
					},
					{
						city: "Salento",
						name: "Hotel El Ed√©n",
						checkIn: "15 Oct",
						checkOut: "18 Oct",
						nights: 3,
						mapLink:
							"https://www.google.com/maps/search/?api=1&query=Hotel+El+Jard√≠n+Salento+Quindio",
					},
					{
						city: "Bogot√°",
						name: "DoubleTree By Hilton Salitre",
						checkIn: "18 Oct",
						checkOut: "22 Oct",
						nights: 4,
						mapLink:
							"https://www.google.com/maps/search/?api=1&query=DoubleTree+by+Hilton+Bogota+Salitre+AR",
					},
				],
				days: [
					{
						day: 1,
						date: "Viernes, 10 de Octubre",
						title: "Llegada e Inmersi√≥n en la Ciudad Amurallada",
						city: "Cartagena",
						narrative:
							"El viaje comienza en el Caribe. Saldremos de CDMX, haremos una escala de 4h en Bogot√° y aterrizaremos en la vibrante Cartagena. Nos instalaremos en el coraz√≥n de la Ciudad Amurallada y nos sumergiremos de inmediato en sus calles coloridas y su historia palpable, culminando con un atardecer inolvidable sobre las antiguas murallas.",
						logistics:
							"La estructura de este d√≠a es ideal para la llegada. La exploraci√≥n autoguiada permite una aclimataci√≥n gradual al ritmo y clima del Caribe. La elecci√≥n del Baluarte de Santo Domingo para el atardecer, en lugar del conocido Caf√© del Mar, es una decisi√≥n estrat√©gica que optimiza la experiencia y el presupuesto.",
						effort: "Medio",
						steps: "10,000 - 12,000",
						weather:
							"Ropa muy ligera (lino, algod√≥n), sandalias c√≥modas, sombrero y protector solar.",
						budgetTable: {
							headers: ["Concepto", "Costo por Persona (COP)"],
							items: [
								{ concept: "Taxi Aeropuerto - Centro", cost: 20000 },
								{ concept: "Almuerzo de Bienvenida", cost: 28000 },
								{ concept: "Bebida en la Muralla", cost: 30000 },
								{ concept: "Peinado con Ros (Propina)", cost: 15000 },
								{ concept: "Cena en Getseman√≠", cost: 55000 },
							],
						},
						itinerary: [
							{
								time: "10:00 - 13:00",
								activity: "‚úàÔ∏è Llegada y Traslado a Cartagena",
								cost_cop: 20000,
								transport:
									"üöï <strong>Taxi (15-20 min)</strong><br>Desde el Aeropuerto CTG al Centro Hist√≥rico.",
								comments:
									"Llegada de CDMX a Bogot√° (BOG), escala de 4h y vuelo a Cartagena (CTG). Nuestro hospedaje est√° en el coraz√≥n de la Ciudad Amurallada, la tarifa de taxi est√° regulada.<br><strong>Consejo T√°ctico:</strong> Confirmar el precio antes de abordar. El pago suele ser en efectivo.",
								links: [
									{
										name: "Ubicaci√≥n: Aeropuerto CTG",
										url: "https://www.google.com/maps/search/?api=1&query=Aeropuerto+Internacional+Rafael+N√∫√±ez+Cartagena",
									},
									{
										name: "Destino: Apartamento Bijou",
										url: "https://www.google.com/maps/search/?api=1&query=Apartamento+Bijou+Centro+Historico+Cartagena",
									},
								],
							},
							{
								time: "13:00 - 14:30",
								activity: "üçΩÔ∏è Almuerzo de Bienvenida",
								cost_cop: 28000,
								transport:
									"üëü <strong>A pie (5 min)</strong><br>Desde el apartamento.",
								comments:
									'Restaurantes como Espiritu Santo o La Mulata son excelentes opciones para probar un buen "corrientazo" gourmet o platos locales.<br><strong>Consejo T√°ctico:</strong> Un "corrientazo" es un almuerzo ejecutivo local, abundante y econ√≥mico. La Mulata es famoso por su pescado fresco.',
								links: [
									{
										name: "Restaurante La Mulata",
										url: "https://www.google.com/maps/search/?api=1&query=La+Mulata+Cartagena",
									},
									{
										name: "Restaurante Espiritu Santo",
										url: "https://www.google.com/maps/search/?api=1&query=Restaurante+Espiritu+Santo+Cartagena",
									},
								],
							},
							{
								time: "14:30 - 17:30",
								activity: "üö∂‚Äç‚ôÇÔ∏è Explorar Ciudad Amurallada (Zona Norte)",
								cost_cop: 0,
								transport:
									"üëü <strong>A pie</strong><br>Recorrido por la zona norte.",
								comments:
									"Exploraremos la Plaza Fern√°ndez Madrid, Las B√≥vedas (mercado de artesan√≠as) y caminaremos sobre la muralla.<br><strong>Consejo T√°ctico:</strong> Llevar agua, el calor puede ser intenso. Las B√≥vedas son antiguas celdas ahora convertidas en tiendas de souvenirs.",
								links: [
									{
										name: "Ubicaci√≥n: Plaza Fern√°ndez Madrid",
										url: "https://www.google.com/maps/search/?api=1&query=Plaza+Fern√°ndez+Madrid+Cartagena",
									},
									{
										name: "Ubicaci√≥n: Las B√≥vedas",
										url: "https://www.google.com/maps/search/?api=1&query=Las+B√≥vedas+Cartagena",
									},
								],
							},
							{
								time: "17:30 - 18:30",
								activity: "üåÖ Atardecer en la Muralla",
								cost_cop: 30000,
								transport:
									"üëü <strong>A pie (10 min)</strong><br>Caminata hacia el Baluarte de Santo Domingo.",
								comments:
									"Ver la puesta de sol desde el Baluarte de Santo Domingo. Opci√≥n m√°s aut√©ntica y econ√≥mica que Caf√© del Mar.<br><strong>Consejo T√°ctico:</strong> Ideal para tomar una Club Colombia o un c√≥ctel mientras se disfruta de la vista. Suele haber vendedores locales.",
								links: [
									{
										name: "Ubicaci√≥n: Baluarte Santo Domingo",
										url: "https://www.google.com/maps/search/?api=1&query=Baluarte+de+Santo+Domingo+Cartagena",
									},
								],
							},
							{
								time: "18:30 - 20:00",
								activity: "üé® Peinado con Ros (Opcional)",
								cost_cop: 15000,
								comments:
									'Actividad cultural √∫nica. Se arregla un pago/propina directamente con Ros en la plaza.<br><strong>Consejo T√°ctico:</strong> Una experiencia cultural con las "palenqueras". El costo es una propina negociada por la foto y la interacci√≥n.',
								transport:
									"üëü <strong>A pie (2 min)</strong><br>En la Plaza de Santo Domingo.",
								links: [
									{
										name: "Ubicaci√≥n: Plaza de Santo Domingo",
										url: "https://www.google.com/maps/search/?api=1&query=Plaza+de+Santo+Domingo+Cartagena",
									},
								],
							},
							{
								time: "20:00 +",
								activity: "üçΩÔ∏è Cena en Getseman√≠",
								cost_cop: 55000,
								transport:
									"üëü <strong>A pie (15 min)</strong><br>Caminata agradable cruzando el Parque Centenario.",
								comments:
									"Explorar el vibrante barrio bohemio, conocido por su arte callejero, ambiente y excelentes restaurantes.<br><strong>Consejo T√°ctico:</strong> Getseman√≠ cobra vida de noche. Demente Bar es excelente para pizzas y tapas.",
								links: [
									{
										name: "Restaurante Demente",
										url: "https://www.google.com/maps/search/?api=1&query=Demente+Bar+Cartagena",
									},
									{
										name: "Restaurante La Cocina de Pepina",
										url: "https://www.google.com/maps/search/?api=1&query=La+Cocina+de+Pepina+Cartagena",
									},
								],
							},
						],
					},
					// ... More day objects would follow the same refactored structure ...
					// NOTE: For brevity, only the first day is shown in this example.
					// The full data structure continues as in the original file.
					// The refactored logic correctly processes all days.
				],
			};

			// This is a placeholder for the rest of the day data from the original file
			// to keep the example concise. The logic works with the full data set.
			const originalFullData = {
				days: [
					{}, // Day 1 placeholder
					{
						day: 2,
						date: "S√°bado, 11 de Octubre",
						title: "Fortalezas y Vistas Panor√°micas",
						city: "Cartagena",
						narrative:
							"Hoy conquistaremos los puntos m√°s altos de Cartagena. Empezaremos en el imponente Castillo de San Felipe, una obra maestra de la ingenier√≠a militar, y luego ascenderemos al Convento de la Popa para obtener las vistas panor√°micas m√°s espectaculares.",
						logistics:
							"El plan de negociar un taxi para el trayecto de ida, espera y vuelta al Convento de la Popa es la metodolog√≠a m√°s segura y eficiente. No se recomienda intentar el ascenso a pie debido a consideraciones de seguridad en la ruta. Esta es una recomendaci√≥n log√≠stica cr√≠tica.",
						effort: "Pesado",
						steps: "13,000 - 16,000",
						weather:
							"Caluroso y h√∫medo. Calzado extremadamente c√≥modo para subir rampas y escaleras, gorra indispensable.",
						budgetTable: {
							headers: ["Concepto", "Costo por Persona (COP)"],
							items: [
								{ concept: "Desayuno", cost: 20000 },
								{ concept: "Taxi a Castillo", cost: 11800 },
								{ concept: "Entrada Castillo San Felipe", cost: 36000 },
								{ concept: "Taxi I/V a Convento de la Popa", cost: 50000 },
								{ concept: "Entrada Convento de la Popa", cost: 15000 },
								{ concept: "Almuerzo y Cena", cost: 93000 },
							],
						},
						itinerary: [
							{
								time: "09:00 - 12:00",
								activity: "üè∞ Explorar Castillo de San Felipe",
								cost_cop: 47800,
								transport:
									"üöï <strong>Taxi (10 min)</strong><br>Desde Getseman√≠.",
								comments:
									"Explorar la fortaleza y sus t√∫neles. Comprar tickets en l√≠nea para evitar filas. Entrada: 36,000 COP. Taxi: ~11,800 COP.<br><strong>Consejo T√°ctico:</strong> Audiogu√≠a muy recomendada para entender la historia y la ingenier√≠a del fuerte.",
								links: [
									{
										name: "Ubicaci√≥n: Castillo de San Felipe",
										url: "https://www.google.com/maps/search/?api=1&query=Castillo+de+San+Felipe+de+Barajas+Cartagena",
									},
									{
										name: "Tickets Oficiales",
										url: "https://fortificacionescartagena.com.co/es/tarifas/",
									},
								],
							},
							{
								time: "12:00 - 14:00",
								activity: "‚õ™ Convento de la Popa",
								cost_cop: 65000,
								transport:
									"üöï <strong>Taxi (20 min)</strong><br>Desde el Castillo. Negociar ida, espera y vuelta.",
								comments:
									"Subir al punto m√°s alto para las mejores vistas. Entrada: 15,000 COP. Taxi I/V ~50,000 COP para el grupo.<br><strong>Consejo T√°ctico:</strong> El taxi espera mientras se realiza la visita. Es la opci√≥n m√°s segura.",
								links: [
									{
										name: "Ubicaci√≥n: Convento de la Popa",
										url: "https://www.google.com/maps/search/?api=1&query=Convento+de+la+Popa+Cartagena",
									},
								],
							},
							{
								time: "14:00 - 15:30",
								activity: "üçΩÔ∏è Almuerzo en Getseman√≠",
								cost_cop: 35000,
								transport:
									"üöï <strong>Taxi (15 min)</strong><br>Bajada desde La Popa.",
								comments:
									"Regresar a Getseman√≠ para almorzar y descansar del calor del mediod√≠a.",
								links: [
									{
										name: "Restaurante Caff√© Lun√°tico",
										url: "https://www.google.com/maps/search/?api=1&query=Caff√©+Lun√°tico+Cartagena",
									},
								],
							},
							{
								time: "15:30 +",
								activity: "üö∂‚Äç‚ôÄÔ∏è Tarde/Noche Libre",
								cost_cop: 78000,
								transport:
									"üëü <strong>A pie</strong><br>Exploraci√≥n por el Centro y Getseman√≠.",
								comments:
									"Tiempo para compras de artesan√≠as o disfrutar de la atm√≥sfera de la ciudad antes de cenar. Alma es una opci√≥n de cena m√°s elegante.<br><strong>Consejo T√°ctico:</strong> Requiere reserva previa.",
								links: [
									{
										name: "Restaurante Alma (Reservar)",
										url: "https://www.almacolombia.com/",
									},
									{
										name: "Restaurante Cand√© (Reservar)",
										url: "https://www.restaurantecande.com/",
									},
								],
							},
						],
					},
					{
						day: 3,
						date: "Domingo, 12 de Octubre",
						title: "Escapada Caribe√±a: Day Pass en Isla",
						city: "Cartagena / Islas del Rosario",
						narrative:
							"Dejamos la historia atr√°s para un d√≠a de relajaci√≥n total en el Caribe. Navegaremos hacia el Parque Nacional Natural Corales del Rosario para disfrutar de un d√≠a completo en un exclusivo club de playa, con sol, mar turquesa y gastronom√≠a isle√±a.",
						logistics:
							"Optar por un 'day pass' a un club de playa es la mejor estrategia para una experiencia familiar controlada y de calidad. Estos paquetes suelen incluir transporte, almuerzo, y uso de instalaciones. Es crucial recordar que el impuesto portuario (~29.000 COP) se paga aparte y en efectivo en el muelle.",
						effort: "Relajado",
						steps: "< 4,000",
						weather:
							"Sol radiante. Traje de ba√±o, ropa de playa, sandalias, sombrero y protector solar biodegradable.",
						budgetTable: {
							headers: ["Concepto", "Costo por Persona"],
							items: [
								{
									concept: "Day Pass Club de Playa (c/almuerzo)",
									cost: 300000,
								},
								{ concept: "Impuesto Portuario (efectivo)", cost: 29000 },
							],
						},
						itinerary: [
							{
								time: "08:00 - 17:00",
								activity: "üèùÔ∏è Day Pass en Club de Playa",
								cost_cop: 329000,
								transport:
									"üö§ <strong>Lancha r√°pida (50-60 min)</strong><br>Desde el Muelle de la Bodeguita.",
								comments:
									"D√≠a completo en un club de playa. El tour (~300.000 COP) incluye transporte y almuerzo. Pagar impuesto portuario (29.000 COP) en efectivo.<br><strong>Consejo T√°ctico:</strong> Reservar online con antelaci√≥n. Bora Bora, Rosario Beach e Isla del Sol son excelentes opciones familiares con buenas instalaciones.",
								links: [
									{
										name: "Ubicaci√≥n: Muelle de la Bodeguita",
										url: "https://www.google.com/maps/search/?api=1&query=Muelle+de+la+Bodeguita+Cartagena",
									},
									{
										name: "Opci√≥n 1: Bora Bora Beach Club",
										url: "https://www.boraboracartagena.com/",
									},
									{
										name: "Opci√≥n 2: Rosario Beach Club",
										url: "https://rosariobeach.co/",
									},
									{
										name: "Opci√≥n 3: Hotel Isla del Sol",
										url: "https://www.isladelsol.com.co/pasadia/",
									},
								],
							},
							{
								time: "17:00 +",
								activity: "üåô Regreso y Noche Tranquila",
								cost_cop: 0,
								transport:
									"üëü <strong>A pie</strong><br>Desde el muelle al apartamento.",
								comments:
									"Noche para descansar, empacar para el vuelo de ma√±ana y cenar algo ligero.",
								links: [],
							},
						],
					},
					{
						day: 4,
						date: "Lunes, 13 de Octubre",
						title: "Transformaci√≥n Urbana y Cultura Paisa",
						city: "Medell√≠n",
						narrative:
							"Cambiamos el Caribe por las monta√±as. Hoy aterrizamos en Medell√≠n, la ciudad de la eterna primavera, para sumergirnos en su historia de transformaci√≥n en la Comuna 13 y admirar el arte de Botero en el coraz√≥n de la ciudad.",
						logistics:
							"El uso del sistema Metro es la forma m√°s eficiente y aut√©ntica de moverse. Adquirir una tarjeta C√≠vica al llegar es una decisi√≥n acertada. Para la Comuna 13, un tour guiado pre-pagado es esencial para comprender el contexto.",
						effort: "Pesado",
						steps: "15,000 - 18,000",
						weather:
							"Templado, alta probabilidad de lluvia. Calzado muy c√≥modo y chaqueta ligera indispensable.",
						budgetTable: {
							headers: ["Concepto", "Costo por Persona (COP)"],
							items: [
								{ concept: "Taxi Hotel - Aeropuerto CTG", cost: 17100 },
								{ concept: "Bus Aeropuerto MDE - Laureles", cost: 17000 },
								{ concept: "Metro (2 trayectos)", cost: 6860 },
								{
									concept: "Tour Guiado Comuna 13",
									cost: 55500,
									prepaid: true,
								},
								{ concept: "Almuerzo en San Javier", cost: 20000 },
								{ concept: "Taxi Centro - Pueblito Paisa", cost: 13000 },
								{ concept: "Cena en Laureles", cost: 50000 },
							],
						},
						itinerary: [
							{
								time: "07:00 - 11:00",
								activity: "‚úàÔ∏è Vuelo y Llegada a Medell√≠n",
								cost_cop: 34100,
								transport:
									"‚úàÔ∏è <strong>Vuelo (1h) / üöå Bus (45 min)</strong><br>Vuelo CTG-MDE y bus desde aeropuerto Rionegro al hotel.",
								comments:
									"Traslados a/desde aeropuertos. El bus desde MDE es eficiente y econ√≥mico.<br><strong>Consejo T√°ctico:</strong> Comprar la tarjeta C√≠vica en una estaci√≥n de metro principal para agilizar los traslados.",
								links: [
									{
										name: "Ubicaci√≥n: Aeropuerto MDE",
										url: "https://www.google.com/maps/search/?api=1&query=Aeropuerto+Internacional+Jos√©+Mar√≠a+C√≥rdova",
									},
									{
										name: "Destino: Casa Santaf√© (Hotel)",
										url: "https://www.google.com/maps/search/?api=1&query=Casa+Santaf√©+Carrera+72+%23C2-30+Medell√≠n",
									},
								],
							},
							{
								time: "11:00 - 14:30",
								activity: "üé® Tour Guiado Comuna 13",
								prepaid: true,
								cost_cop: 62360,
								transport:
									"üöá <strong>Metro y Metrocable (40 min)</strong><br>Desde Est. Estadio a Est. San Javier.",
								comments:
									"Un tour guiado es clave para entender la resiliencia del barrio. El costo incluye snacks y Metrocable.<br><strong>Consejo T√°ctico:</strong> Es una experiencia cultural y social muy potente. Reservar con antelaci√≥n.",
								links: [
									{
										name: "Ubicaci√≥n: Estaci√≥n San Javier",
										url: "https://www.google.com/maps/search/?api=1&query=Estaci√≥n+San+Javier+Medell√≠n",
									},
									{
										name: "Tour Recomendado (GYG)",
										url: "https://www.getyourguide.com/medellin-l363/medellin-comuna-13-graffiti-tour-w-street-food-cable-car-t385233",
									},
								],
							},
							{
								time: "14:30 - 15:30",
								activity: "üçΩÔ∏è Almuerzo en San Javier",
								cost_cop: 20000,
								transport:
									"üëü <strong>A pie</strong><br>Cerca de la estaci√≥n del Metrocable.",
								comments: "Comida local y r√°pida para recargar energ√≠as.",
								links: [],
							},
							{
								time: "15:30 - 17:00",
								activity: "üóø Plaza Botero",
								cost_cop: 6860,
								transport:
									"üöá <strong>Metro (20 min)</strong><br>Desde San Javier a Parque Berr√≠o.",
								comments:
									"Visitar el famoso museo al aire libre con las esculturas de Botero. El costo es del transporte.<br><strong>Consejo T√°ctico:</strong> Estar atentos a las pertenencias en esta zona c√©ntrica y concurrida.",
								links: [
									{
										name: "Ubicaci√≥n: Plaza Botero",
										url: "https://www.google.com/maps/search/?api=1&query=Plaza+Botero+Medellin",
									},
								],
							},
							{
								time: "17:00 - 18:30",
								activity: "üèòÔ∏è Subir al Pueblito Paisa",
								cost_cop: 15000,
								transport:
									"üöï <strong>Taxi (15 min)</strong><br>Desde el centro de la ciudad.",
								comments:
									"Disfrutar de vistas panor√°micas de todo el valle al atardecer.",
								links: [
									{
										name: "Ubicaci√≥n: Pueblito Paisa",
										url: "https://www.google.com/maps/search/?api=1&query=Pueblito+Paisa+Cerro+Nutibara+Medellin",
									},
								],
							},
							{
								time: "19:00 +",
								activity: "üçΩÔ∏è Cena en Laureles",
								cost_cop: 65000,
								transport:
									"üöï <strong>Taxi (15 min)</strong><br>Desde el Pueblito Paisa.",
								comments:
									"Laureles es conocido por su excelente y variada oferta gastron√≥mica, m√°s local que El Poblado.",
								links: [
									{
										name: "Restaurante Mondongo's",
										url: "https://www.google.com/maps/search/?api=1&query=Mondongo's+Laureles+Medell√≠n",
									},
									{
										name: "Restaurante Oci.Mde",
										url: "https://www.google.com/maps/search/?api=1&query=Oci.Mde+Medell√≠n",
									},
								],
							},
						],
					},
					{
						day: 5,
						date: "Martes, 14 de Octubre",
						title: "Ciencia, Naturaleza y el Medell√≠n Moderno",
						city: "Medell√≠n",
						narrative:
							"Un d√≠a de contrastes. Exploraremos la belleza natural en el Jard√≠n Bot√°nico, nos maravillaremos con la ciencia en el Parque Explora y terminaremos la noche en El Poblado, el epicentro de la modernidad y la gastronom√≠a paisa.",
						logistics:
							"La combinaci√≥n del Jard√≠n Bot√°nico y el Parque Explora es muy eficiente, ya que se encuentran uno al lado del otro. Se puede llegar f√°cilmente en Metro (Estaci√≥n Universidad), optimizando tiempos y costos.",
						effort: "Medio",
						steps: "12,000 - 14,000",
						weather:
							"Clima templado. Atuendo c√≥modo. Opcional un atuendo m√°s arreglado para la noche en El Poblado.",
						budgetTable: {
							headers: ["Concepto", "Costo por Persona (COP)"],
							items: [
								{ concept: "Desayuno", cost: 20000 },
								{ concept: "Metro (2 trayectos)", cost: 6860 },
								{ concept: "Almuerzo", cost: 38000 },
								{ concept: "Entrada Parque Explora", cost: 55000 },
								{ concept: "Cena en El Poblado", cost: 100000 },
							],
						},
						itinerary: [
							{
								time: "09:00 - 12:00",
								activity: "üå≥ Visitar Jard√≠n Bot√°nico",
								cost_cop: 3430,
								transport:
									"üöá <strong>Metro (20 min)</strong><br>Desde Est. Estadio a Est. Universidad.",
								comments:
									"La entrada es gratuita. No perderse el Orquideorama, una maravilla arquitect√≥nica. Costo es del transporte.<br><strong>Consejo T√°ctico:</strong> Es un lugar perfecto para una ma√±ana tranquila y fotos espectaculares.",
								links: [
									{
										name: "Ubicaci√≥n: Jard√≠n Bot√°nico",
										url: "https://www.google.com/maps/search/?api=1&query=Jard√≠n+Bot√°nico+de+Medell√≠n",
									},
									{
										name: "Sitio Oficial",
										url: "https://www.botanicomedellin.org/",
									},
								],
							},
							{
								time: "12:00 - 13:30",
								activity: "üçΩÔ∏è Almuerzo",
								cost_cop: 38000,
								transport:
									"üëü <strong>A pie</strong><br>En los alrededores del Jard√≠n Bot√°nico.",
								comments: "Almorzar antes de entrar al siguiente parque.",
								links: [],
							},
							{
								time: "13:30 - 17:00",
								activity: "üî¨ Recorrer Parque Explora",
								cost_cop: 40000,
								transport:
									"üëü <strong>A pie (2 min)</strong><br>Cruzando la calle desde el Jard√≠n Bot√°nico.",
								comments:
									"Entrada: ~40,000 COP. Ideal para la adolescente del grupo por sus exhibiciones interactivas.<br><strong>Consejo T√°ctico:</strong> Comprar entradas online para elegir un horario de ingreso.",
								links: [
									{
										name: "Ubicaci√≥n: Parque Explora",
										url: "https://www.google.com/maps/search/?api=1&query=Parque+Explora+Medell√≠n",
									},
									{
										name: "Tickets Oficiales",
										url: "https://www.parqueexplora.org/cobertura",
									},
								],
							},
							{
								time: "18:00 +",
								activity: "üåÜ Noche en El Poblado",
								cost_cop: 83430,
								transport:
									"üöá <strong>Metro (30 min)</strong><br>Desde Est. Universidad a Est. Poblado.",
								comments:
									"Descubrir el barrio m√°s moderno y cosmopolita de Medell√≠n, famoso por su vibrante escena gastron√≥mica y vida nocturna. Costo incluye cena y transporte.",
								links: [
									{
										name: "Ubicaci√≥n: Parque Lleras",
										url: "https://www.google.com/maps/search/?api=1&query=Parque+Lleras+El+Poblado+Medellin",
									},
									{
										name: "Restaurante El Cielo (Lujo)",
										url: "https://elcielorestaurant.com/restaurantes/medellin/",
									},
								],
							},
						],
					},
					{
						day: 6,
						date: "Mi√©rcoles, 15 de Octubre",
						title: "Viaje al Coraz√≥n del Eje Cafetero",
						city: "Salento",
						narrative:
							"Hoy nos adentramos en el alma de Colombia. Volamos hacia el Eje Cafetero y ascendemos entre monta√±as verdes hasta llegar a Salento, un pueblo de ensue√±o que ser√° nuestra base para explorar la cultura cafetera.",
						logistics:
							"La ruta de volar a Armenia (AXM) y tomar una buseta directa a Salento desde la terminal es la m√°s est√°ndar, eficiente y econ√≥mica. El trayecto por carretera ya es parte de la experiencia y ofrece vistas espectaculares.",
						budget: 112000,
						effort: "Relajado",
						steps: "5,000 - 7,000",
						weather:
							"Templado y h√∫medo. Alta probabilidad de lluvia. Chaqueta ligera para la noche es indispensable.",
						budgetTable: {
							headers: ["Concepto", "Costo por Persona (COP)"],
							items: [
								{ concept: "Almuerzo en Medell√≠n", cost: 30000 },
								{ concept: "Traslado al Aeropuerto MDE", cost: 40000 },
								{ concept: "Buseta Armenia - Salento", cost: 6000 },
								{ concept: "Cena en Salento", cost: 36000 },
							],
						},
						itinerary: [
							{
								time: "Ma√±ana",
								activity: "üçΩÔ∏è Ma√±ana Libre y Almuerzo",
								cost_cop: 30000,
								transport: "üëü <strong>A pie</strong><br>En Medell√≠n.",
								comments: "Disfrutar de la ma√±ana con calma antes del viaje.",
								links: [],
							},
							{
								time: "13:00 - 18:00",
								activity: "‚úàÔ∏è Vuelo y Traslado a Salento",
								cost_cop: 46000,
								transport:
									"‚úàÔ∏è <strong>Vuelo (45 min) / üöå Buseta (40 min)</strong><br>Vuelo MDE-AXM y buseta desde Terminal de Armenia.",
								comments:
									"Traslado al aeropuerto MDE (40,000 COP) y buseta a Salento (6,000 COP).<br><strong>Consejo T√°ctico:</strong> Las busetas a Salento salen frecuentemente desde la terminal de Armenia.",
								links: [
									{
										name: "Ubicaci√≥n: Aeropuerto AXM",
										url: "https://www.google.com/maps/search/?api=1&query=Aeropuerto+Internacional+El+Ed√©n+Armenia",
									},
									{
										name: "Destino: Hotel El Jard√≠n",
										url: "https://www.google.com/maps/search/?api=1&query=Hotel+El+Jard√≠n+Salento+Quindio",
									},
								],
							},
							{
								time: "19:00 - 20:00",
								activity: "üö∂‚Äç‚ôÄÔ∏è Exploraci√≥n de Salento",
								cost_cop: 0,
								transport: "üëü <strong>A pie</strong><br>Desde el hotel.",
								comments:
									"Caminar por la Calle Real y subir al Mirador Alto de la Cruz.<br><strong>Consejo T√°ctico:</strong> La vista al atardecer desde el mirador es espectacular.",
								links: [
									{
										name: "Ubicaci√≥n: Mirador Alto de la Cruz",
										url: "https://www.google.com/maps/search/?api=1&query=Mirador+Alto+de+la+Cruz+Salento",
									},
								],
							},
							{
								time: "20:00 +",
								activity: "üçΩÔ∏è Cena en Salento",
								cost_cop: 36000,
								transport:
									"üëü <strong>A pie</strong><br>En el centro del pueblo.",
								comments:
									"Probar la trucha con patac√≥n, el plato ic√≥nico de la regi√≥n.",
								links: [
									{
										name: "Restaurante Donde Laurita",
										url: "https://www.google.com/maps/search/?api=1&query=Donde+Laurita+Parrilla+Salento",
									},
								],
							},
						],
					},
					{
						day: 7,
						date: "Jueves, 16 de Octubre",
						title: "Palmas de Cera Ic√≥nicas y Legado del Caf√©",
						city: "Salento",
						narrative:
							"Este es el d√≠a ic√≥nico del Eje Cafetero. Caminaremos entre las palmas de cera m√°s altas del mundo en el Valle de Cocora y por la tarde descubriremos los secretos del caf√© colombiano en una finca tradicional.",
						logistics:
							'Visitar el Valle de Cocora a primera hora es crucial para encontrar el valle despejado. Los Jeeps "Willys" salen de la plaza principal. Reservar el tour de caf√© en l√≠nea es recomendable.',
						effort: "Pesado",
						steps: "14,000 - 17,000",
						weather:
							"Prepararse para lluvia y posible barro. Calzado resistente e impermeable (o botas de hule) es esencial. Vestir en capas.",
						budgetTable: {
							headers: ["Concepto", "Costo por Persona (COP)"],
							items: [
								{ concept: "Desayuno", cost: 17000 },
								{ concept: 'Jeep "Willy" a Cocora (I/V)', cost: 10000 },
								{ concept: "Entrada Valle de Cocora", cost: 25000 },
								{ concept: "Almuerzo en Salento", cost: 33000 },
								{ concept: "Jeep a Finca de Caf√©", cost: 8000 },
								{ concept: "Tour de Caf√© Tradicional", cost: 35000 },
								{ concept: "Cena", cost: 36000 },
							],
						},
						itinerary: [
							{
								time: "07:00 - 12:30",
								activity: "üå¥ Valle de Cocora",
								cost_cop: 35000,
								transport:
									'üöô <strong>Jeep "Willy" (30 min)</strong><br>Desde la Plaza de Bol√≠var de Salento.',
								comments:
									'Jeep I/V: 10,000 COP. Entrada "Bosque de las Palmas": 25,000 COP. La ruta corta es ideal para el grupo.<br><strong>Consejo T√°ctico:</strong> Ir lo m√°s temprano posible para evitar nubes. Llevar botas de hule si ha llovido.',
								links: [
									{
										name: "Ubicaci√≥n: Valle de Cocora",
										url: "https://www.google.com/maps/search/?api=1&query=Valle+de+Cocora",
									},
								],
							},
							{
								time: "12:30 - 14:00",
								activity: "üçΩÔ∏è Almuerzo en Salento",
								cost_cop: 32000,
								transport:
									'üöô <strong>Jeep "Willy" (30 min)</strong><br>Regreso desde Cocora.',
								comments: "Recargar energ√≠as antes de la siguiente actividad.",
								links: [],
							},
							{
								time: "14:00 - 16:30",
								activity: "‚òï Tour de Caf√© en Finca El Ocaso",
								cost_cop: 43000,
								transport:
									'üöô <strong>Jeep "Willy" (20 min)</strong><br>Desde Salento.',
								comments:
									"Tour: 35,000 COP. Transporte I/V: 8,000 COP. Es una experiencia muy educativa y sensorial.<br><strong>Consejo T√°ctico:</strong> Reservar el tour con anticipaci√≥n, especialmente en temporada alta.",
								links: [
									{
										name: "Ubicaci√≥n: Finca El Ocaso",
										url: "https://www.google.com/maps/search/?api=1&query=Finca+El+Ocaso+Salento",
									},
									{
										name: "Reservar Tour (El Ocaso)",
										url: "https://fincaelocasosalento.com/tours-de-cafe/",
									},
								],
							},
							{
								time: "17:00 +",
								activity: "üåô Tarde Libre y Cena",
								cost_cop: 53000,
								transport: "üëü <strong>A pie</strong><br>En Salento.",
								comments: "Tiempo para descansar, comprar souvenirs y cenar.",
								links: [],
							},
						],
					},
					{
						day: 8,
						date: "Viernes, 17 de Octubre",
						title: "Filandia, la Colina Iluminada",
						city: "Salento / Filandia",
						narrative:
							"Hoy exploramos m√°s all√° de Salento con una visita a Filandia, un pueblo menos tur√≠stico pero rebosante de encanto. Subiremos a su famoso mirador para obtener vistas de 360 grados del paisaje cultural cafetero.",
						logistics:
							"Incluir Filandia es una excelente decisi√≥n para una perspectiva m√°s aut√©ntica del Eje Cafetero. El transporte en bus o jeep entre Salento y Filandia es frecuente y econ√≥mico.",
						effort: "Medio",
						steps: "10,000 - 12,000",
						weather:
							"Similar a Salento. Estar preparado para la lluvia intermitente y llevar una chaqueta ligera.",
						budgetTable: {
							headers: ["Concepto", "Costo por Persona (COP)"],
							items: [
								{ concept: "Desayuno", cost: 17000 },
								{ concept: "Transporte a Filandia (I/V)", cost: 15000 },
								{ concept: "Entrada Mirador", cost: 12000 },
								{ concept: "Almuerzo en Filandia", cost: 36000 },
								{ concept: "Cena en Salento", cost: 35000 },
							],
						},
						itinerary: [
							{
								time: "09:00 - 12:00",
								activity: "üèûÔ∏è Visita a Filandia y Mirador",
								cost_cop: 27000,
								transport:
									"üöå <strong>Bus (45 min)</strong><br>Desde la terminal de Salento.",
								comments:
									'Transporte I/V: 15,000 COP. Entrada "Mirador Colina Iluminada": 12,000 COP.',
								links: [
									{
										name: "Ubicaci√≥n: Mirador Colina Iluminada",
										url: "https://www.google.com/maps/search/?api=1&query=Mirador+Colina+Iluminada+Filandia",
									},
								],
							},
							{
								time: "12:00 - 13:30",
								activity: "üçΩÔ∏è Almuerzo en Filandia",
								cost_cop: 36000,
								transport:
									"üëü <strong>A pie</strong><br>En el centro de Filandia.",
								comments:
									"Helena Adentro es uno de los restaurantes m√°s aclamados de la regi√≥n.<br><strong>Consejo T√°ctico:</strong> Reservar es altamente recomendable.",
								links: [
									{
										name: "Restaurante Helena Adentro",
										url: "https://www.google.com/maps/search/?api=1&query=Helena+Adentro+Restaurante+Filandia",
									},
								],
							},
							{
								time: "13:30 +",
								activity: "üõçÔ∏è Regreso y Tarde Libre",
								cost_cop: 52000,
								transport:
									"üöå <strong>Bus (45 min)</strong><br>Regreso a Salento.",
								comments:
									"√öltimas compras de artesan√≠as y disfrutar del ambiente del pueblo antes de la cena.",
								links: [],
							},
						],
					},
					{
						day: 9,
						date: "S√°bado, 18 de Octubre",
						title: "Llegada a la Capital y Coraz√≥n Hist√≥rico",
						city: "Bogot√°",
						narrative:
							"Dejamos la tranquilidad del campo para sumergirnos en la vibrante capital. Volamos a Bogot√° y nos dirigimos directamente a La Candelaria, el centro hist√≥rico, para probar su plato insignia y maravillarnos con el tesoro del Museo del Oro.",
						logistics:
							"Un primer d√≠a en Bogot√° bien aprovechado. La ubicaci√≥n del hotel en Salitre implica que los traslados a La Candelaria en taxi o VTC son necesarios. La altitud puede afectar, por lo que es clave tomarlo con calma.",
						effort: "Medio",
						steps: "10,000 - 13,000",
						weather:
							"Clima fresco. Necesitar√° chaqueta. El clima puede ser muy variable, con sol y lluvia en el mismo d√≠a.",
						budgetTable: {
							headers: ["Concepto", "Costo por Persona (COP)"],
							items: [
								{ concept: "Buseta Salento - Armenia", cost: 7200 },
								{ concept: "Taxi Aeropuerto BOG - Salitre", cost: 25000 },
								{ concept: "Taxi Salitre - La Candelaria", cost: 25000 },
								{ concept: "Almuerzo (Ajiaco)", cost: 29000 },
								{ concept: "Entrada Museo del Oro", cost: 5000 },
								{ concept: "Cena en La Candelaria", cost: 41000 },
							],
						},
						itinerary: [
							{
								time: "08:00 - 12:00",
								activity: "‚úàÔ∏è Vuelo y Llegada a Bogot√°",
								cost_cop: 32200,
								transport:
									"‚úàÔ∏è <strong>Vuelo (1h) / üöï Taxi (20 min)</strong><br>Vuelo AXM-BOG y taxi a hotel en Salitre.",
								comments:
									"Buseta a Armenia: 7,200 COP. Taxi Aeropuerto BOG - Hotel: 25,000 COP.",
								links: [
									{
										name: "Ubicaci√≥n: Aeropuerto BOG",
										url: "https://www.google.com/maps/search/?api=1&query=Aeropuerto+Internacional+El+Dorado+Bogot√°",
									},
									{
										name: "Destino: Hotel DoubleTree Salitre AR",
										url: "https://www.google.com/maps/search/?api=1&query=DoubleTree+by+Hilton+Bogota+Salitre+AR",
									},
								],
							},
							{
								time: "13:00 - 14:30",
								activity: "üç≤ Almuerzo: Ajiaco Santafere√±o",
								cost_cop: 54000,
								transport:
									"üöï <strong>Taxi (25-30 min)</strong><br>Desde Salitre a La Candelaria.",
								comments:
									"Probar el plato emblem√°tico en La Puerta Falsa (29,000 COP). Taxi: 25,000 COP.<br><strong>Consejo T√°ctico:</strong> La Puerta Falsa es muy popular y peque√±o, puede haber fila.",
								links: [
									{
										name: "Restaurante La Puerta Falsa",
										url: "https://www.google.com/maps/search/?api=1&query=La+Puerta+Falsa+Restaurante+Bogot√°",
									},
								],
							},
							{
								time: "14:30 - 16:30",
								activity: "üèõÔ∏è Visitar Museo del Oro",
								cost_cop: 5000,
								transport:
									"üëü <strong>A pie (5 min)</strong><br>Desde el restaurante.",
								comments:
									"Entrada: 5,000 COP.<br><strong>Consejo T√°ctico:</strong> Considerar la audiogu√≠a por un costo extra para una experiencia m√°s rica.",
								links: [
									{
										name: "Ubicaci√≥n: Museo del Oro",
										url: "https://www.google.com/maps/search/?api=1&query=Museo+del+Oro+Bogot√°",
									},
									{
										name: "Sitio Oficial",
										url: "https://www.banrepcultural.org/bogota/museo-del-oro",
									},
								],
							},
							{
								time: "16:30 +",
								activity: "üö∂‚Äç‚ôÄÔ∏è Plaza de Bol√≠var y Chorro de Quevedo",
								cost_cop: 41000,
								transport:
									"üëü <strong>A pie (10-15 min)</strong><br>Recorrido por el centro hist√≥rico.",
								comments:
									"Visitar el coraz√≥n pol√≠tico de Colombia y la plazoleta bohemia fundacional antes de cenar.<br><strong>Consejo T√°ctico:</strong> El Chorro de Quevedo es ideal para probar una chicha, bebida ancestral de ma√≠z.",
								links: [
									{
										name: "Ubicaci√≥n: Plaza de Bol√≠var",
										url: "https://www.google.com/maps/search/?api=1&query=Plaza+de+Bol√≠var+Bogot√°",
									},
									{
										name: "Ubicaci√≥n: Chorro de Quevedo",
										url: "https://www.google.com/maps/search/?api=1&query=Chorro+de+Quevedo+Bogot√°",
									},
								],
							},
						],
					},
					{
						day: 10,
						date: "Domingo, 19 de Octubre",
						title: "Vistas desde Monserrate y el Arte de Botero",
						city: "Bogot√°",
						narrative:
							"Hoy ascendemos a los cielos de Bogot√°. Subiremos al Cerro de Monserrate para obtener la vista m√°s espectacular de la metr√≥polis, y luego descenderemos para sumergirnos en el arte universal de Fernando Botero.",
						logistics:
							"Ascender a Monserrate a primera hora es fundamental para vistas despejadas. La compra de tiquetes en l√≠nea es una recomendaci√≥n operativa clave para evitar filas extremadamente largas.",
						effort: "Pesado",
						steps: "14,000 - 16,000",
						weather:
							"Notablemente m√°s fr√≠o en Monserrate (3,152m). Una chaqueta abrigada es esencial. Vestir en capas.",
						budgetTable: {
							headers: ["Concepto", "Costo por Persona (COP)"],
							items: [
								{ concept: "Desayuno en el hotel", cost: 45000 },
								{ concept: "Taxi Hotel - Monserrate", cost: 25000 },
								{ concept: "Tiquete Monserrate (I/V)", cost: 32000 },
								{ concept: "Taxi Monserrate - La Candelaria", cost: 20000 },
								{ concept: "Almuerzo y Cena (Zona G)", cost: 100000 },
							],
						},
						itinerary: [
							{
								time: "07:45 - 11:00",
								activity: "üèûÔ∏è Cerro de Monserrate",
								cost_cop: 57000,
								transport:
									"üöï <strong>Taxi (30 min) / üö† Funicular</strong><br>Taxi desde hotel a base; funicular para ascender.",
								comments:
									"Tiquete I/V: 32,000 COP. Taxi: 25,000 COP.<br><strong>Consejo T√°ctico:</strong> Comprar tiquetes en l√≠nea es CRUCIAL para evitar filas de hasta 2 horas.",
								links: [
									{
										name: "Ubicaci√≥n: Taquilla Monserrate",
										url: "https://www.google.com/maps/search/?api=1&query=Taquilla+Telef√©rico+Monserrate+Bogot√°",
									},
									{
										name: "Compra Online (Tiqets)",
										url: "https://www.tiqets.com/es/atracciones-bogota-c81/entradas-para-monserrate-funicular-o-teleferico-ida-y-vuelta-p1003913/",
									},
								],
							},
							{
								time: "11:00 - 13:00",
								activity: "üé® Visitar Museo Botero",
								cost_cop: 20000,
								transport:
									"üöï <strong>Taxi (15 min)</strong><br>Desde la base de Monserrate a La Candelaria.",
								comments:
									"Entrada gratuita. El costo es del transporte.<br><strong>Consejo T√°ctico:</strong> La colecci√≥n incluye obras de Picasso, Monet y otros maestros, adem√°s de las de Botero.",
								links: [
									{
										name: "Ubicaci√≥n: Museo Botero",
										url: "https://www.google.com/maps/search/?api=1&query=Museo+Botero+Bogot√°",
									},
									{
										name: "Sitio Oficial",
										url: "https://www.banrepcultural.org/bogota/museo-botero",
									},
								],
							},
							{
								time: "13:00 +",
								activity: "üçΩÔ∏è Almuerzo y Tarde/Noche en Zona G",
								cost_cop: 145000,
								transport:
									"üöï <strong>Taxi (25-30 min)</strong><br>Desde La Candelaria a Chapinero.",
								comments:
									"Trasladarse a la exclusiva Zona Gastron√≥mica para almorzar y pasar la tarde/noche. Costo incluye taxi y comidas.<br><strong>Consejo T√°ctico:</strong> La 'G' es de Gourmet. Se recomienda reservar si se elige un restaurante espec√≠fico.",
								links: [
									{
										name: "Ubicaci√≥n: Zona G, Chapinero",
										url: "https://www.google.com/maps/search/?api=1&query=restaurantes+en+Zona+G+Chapinero+Bogota",
									},
									{
										name: "Restaurante Criteri√≥n",
										url: "https://www.google.com/maps/search/?api=1&query=Restaurante+Criteri√≥n+by+Rausch+Bogot√°",
									},
								],
							},
						],
					},
					{
						day: 11,
						date: "Lunes, 20 de Octubre",
						title: "Mercado de Paloquemao y Nostalgia Televisiva",
						city: "Bogot√°",
						narrative:
							'Un d√≠a de inmersi√≥n en la cultura popular colombiana. Empezamos con la explosi√≥n de colores, olores y sabores del Mercado de Paloquemao y terminamos siguiendo los pasos de la telenovela m√°s famosa del mundo: "Betty, la Fea".',
						logistics:
							"Este d√≠a est√° dise√±ado para una inmersi√≥n cultural aut√©ntica. Paloquemao es una experiencia sensorial vibrante. La ruta de Betty es un toque √∫nico y divertido que resonar√° con los fans.",
						effort: "Medio",
						steps: "11,000 - 13,000",
						weather:
							"Atuendo est√°ndar de Bogot√°. Calzado c√≥modo y cerrado es recomendable para el mercado.",
						budgetTable: {
							headers: ["Concepto", "Costo por Persona (COP)"],
							items: [
								{ concept: "Desayuno en el hotel", cost: 45000 },
								{ concept: "Taxi Hotel - Paloquemao", cost: 18000 },
								{ concept: "Degustaci√≥n de Frutas", cost: 15000 },
								{ concept: "Taxi Paloquemao - Teusaquillo", cost: 15000 },
								{ concept: "Almuerzo en Teusaquillo", cost: 38000 },
								{ concept: "Cena", cost: 80000 },
							],
						},
						itinerary: [
							{
								time: "07:30 - 10:30",
								activity: "üçì Mercado de Paloquemao",
								cost_cop: 33000,
								transport:
									"üöï <strong>Taxi (20 min)</strong><br>Desde el hotel.",
								comments:
									"Taxi: 18,000 COP. Degustaci√≥n frutas: 15,000 COP.<br><strong>Consejo T√°ctico:</strong> Ir temprano para ver la secci√≥n de flores en su apogeo. Es un fest√≠n para los sentidos.",
								links: [
									{
										name: "Ubicaci√≥n: Mercado de Paloquemao",
										url: "https://www.google.com/maps/search/?api=1&query=Mercado+de+Paloquemao+Bogot√°",
									},
								],
							},
							{
								time: "10:30 +",
								activity: 'ü§ì Ruta "Betty, la Fea"',
								cost_cop: 53000,
								transport:
									"üöï <strong>Taxi (15 min)</strong><br>Desde Paloquemao al barrio Teusaquillo.",
								comments:
									"Visitaremos la casa de Betty (Carrera 18A #43A-59). Taxi: 15,000 COP. Almuerzo: 38,000 COP.<br><strong>Consejo T√°ctico:</strong> La casa es ahora un museo-caf√©, ideal para fans.",
								links: [
									{
										name: "Ubicaci√≥n: Casa de Betty",
										url: "https://maps.app.goo.gl/x2Qy7Y8v1kX3fJgP9",
									},
								],
							},
							{
								time: "19:00 +",
								activity: "üçΩÔ∏è Cena de Despedida",
								cost_cop: 85000,
								transport: "üöï <strong>Taxi</strong>",
								comments:
									"Cena final en Andr√©s Carne de Res (requiere viaje largo y costoso) o una opci√≥n m√°s c√©ntrica.",
								links: [
									{
										name: "Restaurante Andr√©s Carne de Res (Ch√≠a)",
										url: "https://www.google.com/maps/search/?api=1&query=Andr√©s+Carne+de+Res+Ch√≠a",
									},
								],
							},
						],
					},
					{
						day: 12,
						date: "Martes, 21 de Octubre",
						title: "La Catedral Subterr√°nea de Sal",
						city: "Bogot√° / Zipaquir√°",
						narrative:
							"En nuestro √∫ltimo d√≠a completo, realizamos una excursi√≥n inolvidable a Zipaquir√° para descender 180 metros bajo tierra y maravillarnos con la primera maravilla de Colombia: una imponente catedral cat√≥lica tallada enteramente en una mina de sal.",
						logistics:
							"La planificaci√≥n de usar la Terminal de Salitre para el transporte a Zipaquir√° es log√≠sticamente s√≥lida dada la proximidad del hotel. Asignar cuatro horas para la visita es adecuado. Comprar la entrada en l√≠nea evita filas.",
						effort: "Medio",
						steps: "9,000 - 11,000",
						weather:
							"Vestir en capas. Llevar chaqueta abrigada para la catedral (temperatura interior de ~14¬∞C).",
						budgetTable: {
							headers: ["Concepto", "Costo por Persona (COP)"],
							items: [
								{ concept: "Desayuno en el hotel", cost: 45000 },
								{ concept: "Transporte a Zipaquir√° (I/V)", cost: 40000 },
								{ concept: "Entrada Catedral de Sal", cost: 118000 },
								{ concept: "Almuerzo en Zipaquir√°", cost: 33000 },
							],
						},
						itinerary: [
							{
								time: "07:30 - 13:30",
								activity: "‚õ™ Excursi√≥n a la Catedral de Sal",
								cost_cop: 158000,
								transport:
									"üöï <strong>Taxi (10 min) / üöå Bus (1.5h)</strong><br>Taxi a Terminal Salitre y bus intermunicipal a Zipaquir√°.",
								comments:
									"Transporte I/V: 40,000 COP. Entrada: 118,000 COP.<br><strong>Consejo T√°ctico:</strong> Comprar tickets en l√≠nea para evitar filas. El recorrido b√°sico dura unas 2 horas.",
								links: [
									{
										name: "Ubicaci√≥n: Catedral de Sal",
										url: "https://www.google.com/maps/search/?api=1&query=Catedral+de+Sal+de+Zipaquir√°",
									},
									{
										name: "Tickets Oficiales",
										url: "https://www.catedraldesal.gov.co/",
									},
								],
							},
							{
								time: "13:30 - 15:00",
								activity: "üçΩÔ∏è Almuerzo en Zipaquir√°",
								cost_cop: 33000,
								transport:
									"üëü <strong>A pie</strong><br>En el centro de Zipaquir√°.",
								comments:
									"Probar la gastronom√≠a local antes de regresar a Bogot√°.",
								links: [],
							},
							{
								time: "15:00 +",
								activity: "üåô Regreso y Tarde Libre",
								cost_cop: 45000,
								transport:
									"üöå <strong>Bus (1.5h) / üöï Taxi (10 min)</strong><br>Regreso a Bogot√°.",
								comments: "Tarde para descansar y una cena ligera.",
								links: [],
							},
						],
					},
					{
						day: 13,
						date: "Mi√©rcoles, 22 de Octubre",
						title: "Regreso a Casa",
						city: "Bogot√°",
						narrative:
							"Es el final de nuestra aventura colombiana. Despu√©s del desayuno, nos dirigiremos al Aeropuerto El Dorado para tomar nuestro vuelo de regreso a casa, llenos de recuerdos inolvidables.",
						logistics:
							"Coordinar el taxi o VTC al aeropuerto con suficiente antelaci√≥n, considerando el tr√°fico de Bogot√°. El Aeropuerto El Dorado es moderno y eficiente.",
						effort: "Relajado",
						steps: "< 3,000",
						weather: "Ropa c√≥moda para el vuelo.",
						budgetTable: {
							headers: ["Concepto", "Costo por Persona (COP)"],
							items: [
								{ concept: "Desayuno", cost: 40000 },
								{ concept: "Traslado al Aeropuerto (BOG)", cost: 25000 },
							],
						},
						itinerary: [
							{
								time: "Ma√±ana",
								activity: "üçΩÔ∏è Desayuno y Check-out",
								cost_cop: 40000,
								transport: "üëü <strong>A pie</strong><br>En el hotel.",
								comments:
									"Disfrutar del √∫ltimo desayuno colombiano y realizar el check-out.",
								links: [],
							},
							{
								time: "12:00",
								activity: "‚úàÔ∏è Traslado al Aeropuerto (BOG)",
								cost_cop: 25000,
								transport:
									"üöï <strong>Taxi (20 min)</strong><br>Desde el hotel al aeropuerto.",
								comments:
									"Asegurarse de llegar 3 horas antes para un vuelo internacional.",
								links: [
									{
										name: "Ubicaci√≥n: Aeropuerto El Dorado",
										url: "https://www.google.com/maps/search/?api=1&query=Aeropuerto+Internacional+El+Dorado+Bogot√°",
									},
								],
							},
						],
					},
				],
			};
			tripData.days = [tripData.days[0], ...originalFullData.days.slice(1)];

			// =================================================================================
			// APPLICATION LOGIC (Refactored into an encapsulated object)
			// Follows Separation of Concerns principle.
			// =================================================================================

			const ItineraryApp = {
				data: null,
				elements: {},
				chartInstance: null,

				/**
				 * Main initialization function.
				 */
				init() {
					this.data = tripData;
					this.cacheDOMElements();
					this.utils.validateItineraryTimes(this.data.days);

					this.render.all();
					this.events.setupTabNavigation();
				},

				/**
				 * Caches frequently accessed DOM elements.
				 */
				cacheDOMElements() {
					this.elements = {
						tabsContainer: document.querySelector(".tabs-container"),
						contentContainer: document.getElementById("content-container"),
						tabsNav: document.getElementById("tabs-navigation"),
						lodgingBody: document.querySelector("#lodging-summary tbody"),
						summaryTotalMXN: document.getElementById("summary-total-mxn"),
						summaryTotalCOP: document.getElementById("summary-total-cop"),
						budgetTableContainer: document.getElementById(
							"general-budget-table-container"
						),
						chartCanvas: document.getElementById("destinationCostChart"),
					};
				},

				// =================================================================================
				// UTILITY MODULE
				// Pure functions for formatting, calculations, and validation.
				// =================================================================================
				utils: {
					/**
					 * Formats a number into a specified currency, including the currency code.
					 */
					formatCurrency(value, currency = "COP") {
						const options = {
							style: "currency",
							currency: currency,
							maximumFractionDigits: currency === "COP" ? 0 : 2,
						};
						const locale = currency === "COP" ? "es-CO" : "es-MX";
						const formattedValue = new Intl.NumberFormat(
							locale,
							options
						).format(value);
						return `${formattedValue} ${currency}`; // Append currency code
					},

					/**
					 * Formats a value in COP and its approximate equivalent in MXN.
					 */
					formatDualCurrency(valueCOP, prepaid = false) {
						if (prepaid) return "Pre-pagado";
						if (typeof valueCOP !== "number" || isNaN(valueCOP)) return "N/A";
						if (valueCOP === 0) return "Gratis";

						const mxnValue = valueCOP * CONFIG.COP_TO_MXN_RATE;
						const formattedCOP = this.formatCurrency(valueCOP, "COP");
						const formattedMXN = this.formatCurrency(mxnValue, "MXN");

						return `${formattedCOP} / ~${formattedMXN}`;
					},

					/**
					 * Calculates the total cost for a day from its budget items.
					 */
					calculateDailyTotal(items) {
						return items.reduce((sum, item) => sum + (item.cost || 0), 0);
					},

					/**
					 * Validates that end times are after start times in the itinerary.
					 */
					validateItineraryTimes(days) {
						console.log("Running itinerary data validation...");
						days.forEach(day => {
							day.itinerary.forEach(item => {
								if (!item.time || item.time.includes("+")) return;

								const parts = item.time.split("-").map(t => t.trim());
								if (parts.length !== 2) return;

								try {
									const [startHour, startMin] = parts[0].split(":").map(Number);
									const [endHour, endMin] = parts[1].split(":").map(Number);

									const startTime = startHour * 60 + startMin;
									const endTime = endHour * 60 + endMin;

									if (startTime >= endTime) {
										console.warn(
											`Data Validation Warning: Inconsistent time range in Day ${day.day}, Activity "${item.activity}". Start time is not before end time. Time: "${item.time}"`
										);
									}
								} catch (e) {
									console.error(
										`Could not parse time for activity: ${item.activity}`,
										e
									);
								}
							});
						});
						console.log("Validation complete.");
					},

					/**
					 * Categorizes an expense based on its concept string.
					 */
					categorizeExpense(concept) {
						const lowerConcept = concept.toLowerCase();
						if (
							["almuerzo", "cena", "bebida", "desayuno", "degustaci√≥n"].some(
								c => lowerConcept.includes(c)
							)
						)
							return "Alimentaci√≥n";
						if (
							[
								"tour",
								"entrada",
								"pass",
								"peinado",
								"impuesto portuario",
								"tiquete",
								"foto",
							].some(c => lowerConcept.includes(c))
						)
							return "Actividades";
						if (
							[
								"taxi",
								"metro",
								"buseta",
								"jeep",
								"traslado",
								"bus",
								"funicular",
							].some(c => lowerConcept.includes(c))
						)
							return "Transporte";
						return "Otros";
					},
				},

				// =================================================================================
				// RENDER MODULE
				// Functions responsible for all DOM manipulation.
				// =================================================================================
				render: {
					/**
					 * Calls all render functions to build the page.
					 */
					all() {
						const budgetCalculations = this.calculateGeneralBudget();
						this.summaryCards(budgetCalculations.totalMXN);
						this.lodgingSummary();
						this.tabs();
						this.tabContents();
						this.generalBudgetTable(budgetCalculations);
						this.destinationCostChart();
					},

					/**
					 * Renders the main summary cards with total costs.
					 */
					summaryCards(totalMXN) {
						ItineraryApp.elements.summaryTotalMXN.textContent =
							ItineraryApp.utils.formatCurrency(totalMXN, "MXN");
						ItineraryApp.elements.summaryTotalCOP.textContent = `(~${ItineraryApp.utils.formatCurrency(
							totalMXN / CONFIG.COP_TO_MXN_RATE,
							"COP"
						)})`;
					},

					/**
					 * Renders the lodging summary table.
					 */
					lodgingSummary() {
						const html = ItineraryApp.data.lodgingSummary
							.map(
								item => `
							<tr class="border-b border-slate-200 last:border-b-0">
								<td class="py-3 pr-3 text-sm font-semibold text-slate-700">${item.city}</td>
								<td class="py-3 pr-3 text-sm text-slate-600"><a href="${item.mapLink}" target="_blank" class="text-teal-600 hover:underline">${item.name}</a></td>
								<td class="py-3 pr-3 text-sm text-slate-600">${item.checkIn} - ${item.checkOut}</td>
								<td class="py-3 pr-3 text-sm text-slate-600 text-center">${item.nights}</td>
							</tr>
						`
							)
							.join("");
						ItineraryApp.elements.lodgingBody.innerHTML = html;
					},

					/**
					 * Renders the navigation tabs for each day.
					 */
					tabs() {
						const html = ItineraryApp.data.days
							.map(
								day => `
							<button class="tab inline-block px-4 py-2 text-sm font-semibold rounded-md transition-colors mr-2 bg-white text-slate-600 hover:bg-slate-100 shadow-sm" data-target="day-${day.day}">
								D√≠a ${day.day}
							</button>
						`
							)
							.join("");
						ItineraryApp.elements.tabsContainer.innerHTML = html;
					},

					/**
					 * Renders the content for all tabs.
					 */
					tabContents() {
						const html = ItineraryApp.data.days
							.map(day => this.getDayHtml(day))
							.join("");
						ItineraryApp.elements.contentContainer.innerHTML = html;

						// Activate the first tab by default
						document.querySelector(".tab")?.classList.add("active");
						document.querySelector(".tab-content")?.classList.add("active");
					},

					/**
					 * Generates the complete HTML for a single day's content.
					 */
					getDayHtml(day) {
						const dailyTotalCOP = ItineraryApp.utils.calculateDailyTotal(
							day.budgetTable.items
						);

						const linksHTML = links =>
							links && links.length > 0
								? links
										.map(
											link =>
												`<a href="${link.url}" target="_blank" rel="noopener noreferrer" class="inline-block bg-teal-50 text-teal-800 hover:bg-teal-100 text-sm font-semibold mr-2 mb-2 px-3 py-1.5 rounded-full transition-colors">üìç ${link.name}</a>`
										)
										.join("")
								: "";

						const itineraryHTML = day.itinerary
							.map(
								item => `
							<tr class="border-b border-slate-200 last:border-b-0">
								<td class="py-4 pr-3 align-top text-sm font-semibold text-slate-600">${
									item.time
								}</td>
								<td class="py-4 pr-3 align-top">
									<p class="font-semibold text-slate-800">${item.activity}</p>
									<p class="font-bold text-teal-600 text-sm mt-1">${ItineraryApp.utils.formatDualCurrency(
										item.cost_cop,
										item.prepaid
									)}</p>
								</td>
								<td class="py-4 pr-3 align-top text-sm text-slate-500">${item.transport}</td>
								<td class="py-4 pr-3 align-top text-sm text-slate-500">${item.comments}</td>
								<td class="py-4 align-top">${linksHTML(item.links)}</td>
							</tr>
						`
							)
							.join("");

						const budgetTableHTML = `
							<div class="overflow-x-auto">
								<table class="w-full text-left md:w-2/3 lg:w-1/2">
									<thead>
										<tr class="border-b-2 border-slate-300">
											<th class="py-2 pr-3 font-semibold text-sm">${day.budgetTable.headers[0]}</th>
											<th class="py-2 pr-3 font-semibold text-sm text-right">${
												day.budgetTable.headers[1]
											}</th>
										</tr>
									</thead>
									<tbody>
										${day.budgetTable.items
											.map(
												item => `
											<tr class="border-b border-slate-200 last:border-b-0">
												<td class="py-3 pr-3 text-sm text-slate-600">${item.concept}</td>
												<td class="py-3 pr-3 text-sm text-slate-800 font-semibold text-right whitespace-nowrap">${ItineraryApp.utils.formatDualCurrency(
													item.cost
												)}</td>
											</tr>
										`
											)
											.join("")}
									</tbody>
									<tfoot>
										<tr class="border-t-2 border-slate-300">
											<td class="py-3 pr-3 font-bold text-slate-800">Total del D√≠a</td>
											<td class="py-3 pr-3 font-bold text-teal-600 text-right whitespace-nowrap">${ItineraryApp.utils.formatDualCurrency(
												dailyTotalCOP
											)}</td>
										</tr>
									</tfoot>
								</table>
							</div>
						`;

						return `
							<div id="day-${day.day}" class="tab-content">
								<div class="bg-white p-6 sm:p-8 rounded-lg shadow-md">
									<div class="border-b-2 border-teal-600 pb-4 mb-6">
										<h2 class="text-3xl font-bold text-teal-700">${`D√≠a ${day.day}: ${day.title}`}</h2>
										<p class="text-lg text-slate-500 mt-1">${day.date} - ${day.city}</p>
									</div>
									<div class="mb-8">
										<h3 class="text-xl font-bold mb-3 text-slate-700">Resumen Narrativo</h3>
										<p class="text-slate-600">${day.narrative}</p>
									</div>
									<div class="mb-8">
										<h3 class="text-xl font-bold mb-4 text-slate-700">Dossier T√°ctico del D√≠a</h3>
										<div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4">
											<div class="bg-slate-50 p-4 rounded-lg shadow-sm text-center flex flex-col justify-center">
												<p class="text-3xl mb-1">üí∞</p>
												<p class="text-sm font-semibold text-slate-500">Presupuesto (COP)</p>
												<p class="text-lg font-bold text-teal-600">${ItineraryApp.utils.formatDualCurrency(
													dailyTotalCOP
												)}</p>
											</div>
											<div class="bg-slate-50 p-4 rounded-lg shadow-sm text-center flex flex-col justify-center">
												<p class="text-3xl mb-1">üí™</p>
												<p class="text-sm font-semibold text-slate-500">Esfuerzo F√≠sico</p>
												<p class="text-lg font-bold text-teal-600">${day.effort}</p>
											</div>
											<div class="bg-slate-50 p-4 rounded-lg shadow-sm text-center flex flex-col justify-center">
												<p class="text-3xl mb-1">üëü</p>
												<p class="text-sm font-semibold text-slate-500">Pasos Aprox.</p>
												<p class="text-lg font-bold text-teal-600">${day.steps}</p>
											</div>
											<div class="bg-slate-50 p-4 rounded-lg shadow-sm text-center flex flex-col justify-center">
												<p class="text-3xl mb-1">${
													day.city.includes("Cartagena")
														? "‚òÄÔ∏è"
														: day.city.includes("Medell√≠n") ||
														  day.city.includes("Salento")
														? "üå¶Ô∏è"
														: "‚òÅÔ∏è"
												}</p>
												<p class="text-sm font-semibold text-slate-500">Clima / Vestimenta</p>
												<p class="text-xs font-semibold text-teal-700 mt-1">${day.weather}</p>
											</div>
										</div>
									</div>
									<div class="mb-8">
										<h3 class="text-xl font-bold mb-3 text-slate-700">Log√≠stica y Consejos</h3>
										<p class="text-slate-600">${day.logistics}</p>
									</div>
									<div class="mb-8">
										<h3 class="text-xl font-bold mb-4 text-slate-700">Plan de Acci√≥n Detallado</h3>
										<div class="overflow-x-auto">
											<table class="w-full text-left min-w-[1000px]">
												<thead>
													<tr class="border-b-2 border-slate-300">
														<th class="py-2 pr-3 font-semibold text-sm w-[12%]">Horario</th>
														<th class="py-2 pr-3 font-semibold text-sm w-[20%]">Actividad y Costo</th>
														<th class="py-2 pr-3 font-semibold text-sm w-[23%]">C√≥mo Llegar y Tiempos</th>
														<th class="py-2 pr-3 font-semibold text-sm w-[20%]">Comentarios</th>
														<th class="py-2 pr-3 font-semibold text-sm w-[25%]">Recursos Externos</th>
													</tr>
												</thead>
												<tbody>${itineraryHTML}</tbody>
											</table>
										</div>
									</div>
									<div>
										<h3 class="text-xl font-bold mb-4 text-slate-700">Desglose de Presupuesto Diario (COP)</h3>
										${budgetTableHTML}
									</div>
								</div>
							</div>
						`;
					},

					/**
					 * Calculates the entire trip budget from the single source of truth.
					 * @returns {object} An object with detailed budget breakdown.
					 */
					calculateGeneralBudget() {
						const { prepaidCosts, days } = ItineraryApp.data;
						const onTripCostsCOP = {
							Alimentaci√≥n: 0,
							Actividades: 0,
							Transporte: 0,
							Otros: 0,
						};

						days.forEach(day => {
							if (day.budgetTable && day.budgetTable.items) {
								day.budgetTable.items.forEach(item => {
									// Do not double-count prepaid items in on-trip budget
									if (item.prepaid) return;

									const category = ItineraryApp.utils.categorizeExpense(
										item.concept
									);
									onTripCostsCOP[category] += item.cost;
								});
							}
						});

						const prepaidHospedajesMXN = Object.values(
							prepaidCosts.hospedajesMXN
						).reduce((sum, cost) => sum + cost, 0);

						// Calculate on-trip totals in MXN
						const onTripTotalCOP = Object.values(onTripCostsCOP).reduce(
							(sum, cost) => sum + cost,
							0
						);
						const onTripAlimentacionMXN =
							onTripCostsCOP.Alimentaci√≥n * CONFIG.COP_TO_MXN_RATE;
						const onTripActividadesMXN =
							onTripCostsCOP.Actividades * CONFIG.COP_TO_MXN_RATE;
						const onTripTransporteMXN =
							onTripCostsCOP.Transporte * CONFIG.COP_TO_MXN_RATE;
						const onTripOtrosMXN =
							onTripCostsCOP.Otros * CONFIG.COP_TO_MXN_RATE;

						const contingenciaMXN =
							onTripTotalCOP * CONFIG.CONTINGENCY_RATE * CONFIG.COP_TO_MXN_RATE;

						const budgetData = [
							{
								category: "Vuelos Internacionales",
								cost: prepaidCosts.vuelosInternacionalesMXN,
							},
							{
								category: "Hospedajes (12 noches)",
								cost: prepaidHospedajesMXN,
							},
							{
								category: "Vuelos Internos (4 vuelos)",
								cost: prepaidCosts.vuelosInternosMXN,
							},
							{
								category: "Actividades y Entradas",
								cost: onTripActividadesMXN,
							},
							{ category: "Alimentaci√≥n", cost: onTripAlimentacionMXN },
							{
								category: "Transporte Local",
								cost: onTripTransporteMXN + onTripOtrosMXN,
							},
							{
								category: "Fondo de Contingencia (15%)",
								cost: contingenciaMXN,
							},
						];

						const totalMXN = budgetData.reduce(
							(sum, item) => sum + item.cost,
							0
						);

						return { budgetData, totalMXN };
					},

					/**
					 * Renders the general budget distribution table.
					 */
					generalBudgetTable(budgetCalculations) {
						const { budgetData, totalMXN } = budgetCalculations;
						let tableHTML = `
                            <div class="overflow-x-auto">
                                <table class="w-full text-left">
                                    <thead>
                                        <tr class="border-b-2 border-slate-300">
                                            <th class="py-2 pr-3 font-semibold text-sm">Categor√≠a</th>
                                            <th class="py-2 pr-3 font-semibold text-sm text-right">Costo Estimado (MXN)</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        ${budgetData
																					.map(
																						item => `
                                            <tr class="border-b border-slate-200 last:border-b-0">
                                                <td class="py-3 pr-3 text-sm text-slate-600">${
																									item.category
																								}</td>
                                                <td class="py-3 pr-3 text-sm text-slate-800 font-semibold text-right whitespace-nowrap">${ItineraryApp.utils.formatCurrency(
																									item.cost,
																									"MXN"
																								)}</td>
                                            </tr>
                                        `
																					)
																					.join("")}
                                    </tbody>
                                    <tfoot>
                                        <tr class="border-t-2 border-slate-300">
                                            <td class="py-3 pr-3 font-bold text-slate-800">Total Estimado p.p.</td>
                                            <td class="py-3 pr-3 font-bold text-teal-600 text-right whitespace-nowrap">${ItineraryApp.utils.formatCurrency(
																							totalMXN,
																							"MXN"
																						)}</td>
                                        </tr>
                                    </tfoot>
                                </table>
                            </div>
                        `;
						ItineraryApp.elements.budgetTableContainer.innerHTML += tableHTML;
					},

					/**
					 * Renders the destination cost breakdown chart.
					 */
					destinationCostChart() {
						const destinationCosts = {
							Cartagena: { total: 0 },
							Medell√≠n: { total: 0 },
							"Eje Cafetero": { total: 0 },
							Bogot√°: { total: 0 },
						};

						ItineraryApp.data.days.forEach(day => {
							const city = day.city.split("/")[0].trim();
							let destination = null;
							if (city === "Cartagena") destination = "Cartagena";
							else if (city === "Medell√≠n") destination = "Medell√≠n";
							else if (["Salento", "Filandia"].includes(city))
								destination = "Eje Cafetero";
							else if (["Bogot√°", "Zipaquir√°"].includes(city))
								destination = "Bogot√°";

							if (destination) {
								destinationCosts[destination].total +=
									ItineraryApp.utils.calculateDailyTotal(day.budgetTable.items);
							}
						});

						const labels = Object.keys(destinationCosts);
						const data = labels.map(label => destinationCosts[label].total);

						const ctx = ItineraryApp.elements.chartCanvas.getContext("2d");
						if (ItineraryApp.chartInstance) {
							ItineraryApp.chartInstance.destroy();
						}

						Chart.register(ChartDataLabels);
						ItineraryApp.chartInstance = new Chart(ctx, {
							type: "bar",
							data: {
								labels: labels,
								datasets: [
									{
										label: "Gasto Total por Destino (COP)",
										data: data,
										backgroundColor: CONFIG.CHART_COLORS,
									},
								],
							},
							options: {
								indexAxis: "y",
								responsive: true,
								maintainAspectRatio: false,
								plugins: {
									legend: { display: false },
									tooltip: {
										callbacks: {
											label: c =>
												` ${ItineraryApp.utils.formatCurrency(c.raw, "COP")}`,
										},
									},
									datalabels: {
										anchor: "end",
										align: "end",
										formatter: value =>
											ItineraryApp.utils.formatCurrency(value, "COP"),
										font: { weight: "bold" },
										color: "#334155",
									},
								},
								scales: {
									x: {
										ticks: {
											callback: v => v / 1000 + "K",
										},
									},
								},
							},
						});
					},
				},

				// =================================================================================
				// EVENTS MODULE
				// Handles all user interactions.
				// =================================================================================
				events: {
					setupTabNavigation() {
						ItineraryApp.elements.tabsContainer.addEventListener("click", e => {
							if (!e.target.classList.contains("tab")) return;

							const targetId = e.target.dataset.target;
							const targetElement = document.getElementById(targetId);

							document
								.querySelectorAll(".tab")
								.forEach(t => t.classList.remove("active"));
							e.target.classList.add("active");

							document
								.querySelectorAll(".tab-content")
								.forEach(c => c.classList.remove("active"));
							if (targetElement) {
								targetElement.classList.add("active");

								const offset = ItineraryApp.elements.tabsNav.offsetHeight + 20;
								const bodyRect = document.body.getBoundingClientRect().top;
								const elementRect = targetElement.getBoundingClientRect().top;
								const elementPosition = elementRect - bodyRect;
								const offsetPosition = elementPosition - offset;

								window.scrollTo({
									top: offsetPosition,
									behavior: "smooth",
								});
							}
						});
					},
				},
			};

			document.addEventListener("DOMContentLoaded", () => ItineraryApp.init());
		</script>
	</body>
</html>
